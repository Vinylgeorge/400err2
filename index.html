<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>MTurk Queue</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; background: #fafafa; }
    table { border-collapse: collapse; width: 100%; }
    th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
    th { background: #333; color: #fff; }
    tr:nth-child(even) { background: #f9f9f9; }
  </style>
</head>
<body>

<h2>Your HITs Queue</h2>
<table>
  <thead>
    <tr>
      <th>Requester</th>
      <th>Title</th>
      <th>Reward</th>
      <th>Worker ID</th>
      <th>Time Remaining</th>
      <th>Accepted At</th>
    </tr>
  </thead>
  <tbody id="queue-body">
    <!-- Rows will be injected here -->
  </tbody>
</table>

<script>
  // Example scraped data (replace with your live scraped array)
  const queueData = [
    {
      requester: "ooga.io",
      title: "Identify viable survey opportunities - v2",
      reward: "0.05",
      workerId: "A27WGJXVQ1H0UB",
      timeRemainingSeconds: 1251,
      acceptedAt: "2025-09-15T22:47:04.000Z"
    },
    {
      requester: "Shopping Receipts",
      title: "Extract General Data & Items From Shopping Receipt",
      reward: "0.01",
      workerId: "A27WGJXVQ1H0UB",
      timeRemainingSeconds: 1776,
      acceptedAt: "2025-09-15T23:25:49.000Z"
    }
  ];

  function formatTimeRemaining(seconds) {
    const mins = Math.floor(seconds / 60);
    const secs = seconds % 60;
    return `${mins}m ${secs}s`;
  }

  function renderQueue(queue) {
    const tbody = document.getElementById("queue-body");
    tbody.innerHTML = ""; // clear existing rows
    queue.forEach(hit => {
      const row = document.createElement("tr");
      row.innerHTML = `
        <td>${hit.requester}</td>
        <td>${hit.title}</td>
        <td>$${hit.reward}</td>
        <td>${hit.workerId}</td>
        <td>${formatTimeRemaining(hit.timeRemainingSeconds)}</td>
        <td>${new Date(hit.acceptedAt).toLocaleString()}</td>
      `;
      tbody.appendChild(row);
    });
  }

  // Render the queue
  renderQueue(queueData);
</script>

</body>
</html>
