<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>MTurk Queue</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; background: #fafafa; }
    table { border-collapse: collapse; width: 100%; margin-top: 10px; }
    th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
    th { background: #333; color: #fff; }
    tr:nth-child(even) { background: #f9f9f9; }
    h2 { margin-bottom: 10px; }
  </style>
</head>
<body>

<h2 id="queue-header">Your HITs Queue (0)</h2>

<table>
  <thead>
    <tr>
      <th>Requester</th>
      <th>Title</th>
      <th>Reward</th>
      <th>Worker ID</th>
      <th>Time Remaining</th>
      <th>Accepted At</th>
    </tr>
  </thead>
  <tbody id="queue-body">
    <!-- Rows will be injected here -->
  </tbody>
</table>

<script>
  function formatTimeRemaining(seconds) {
    const m = Math.floor(seconds / 60);
    const s = seconds % 60;
    return `${m}m ${s}s`;
  }

  // Load queue from localStorage (set by your userscript)
  const queueData = JSON.parse(localStorage.getItem("mturkQueue") || "[]");
  const tbody = document.getElementById("queue-body");
  const header = document.getElementById("queue-header");

  queueData.forEach(hit => {
    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td>${hit.requester}</td>
      <td>${hit.title}</td>
      <td>$${hit.reward}</td>
      <td>${hit.workerId}</td>
      <td>${formatTimeRemaining(hit.timeRemainingSeconds || 0)}</td>
      <td>${new Date(hit.acceptedAt || hit.time).toLocaleString()}</td>
    `;
    tbody.appendChild(tr);
  });

  // Update header with row count
  header.textContent = `Your HITs Queue (${queueData.length})`;
</script>

</body>
</html>
